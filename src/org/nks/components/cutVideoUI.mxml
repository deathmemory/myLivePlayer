<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark" 
		 xmlns:mx="library://ns.adobe.com/flex/mx" 
		 minWidth="400" minHeight="40"
		 creationComplete="group1_creationCompleteHandler(event)">
	<fx:Script>
		<![CDATA[
			import com.longtailvideo.jwplayer.events.MediaEvent;
			import com.longtailvideo.jwplayer.events.ViewEvent;
			import com.longtailvideo.jwplayer.player.Player;
			
			import mx.controls.Button;
			import mx.events.FlexEvent;
			
			private var _player:Player;
			private var _duration:Number;
			
			protected function group1_creationCompleteHandler(event:FlexEvent):void
			{
				// TODO Auto-generated method stub
			}
			
			public function init(player:Player):void
			{
				_player = player;
				if (_player)
					this.visible = true;
				_player.addEventListener(MediaEvent.JWPLAYER_MEDIA_TIME, mediaHandler);
				_player.addEventListener(MediaEvent.JWPLAYER_MEDIA_VOLUME, volumeHandler);
			}
			
			protected function volumeHandler(evt:MediaEvent):void 
			{
				trace("volume:" + evt.volume);
			}
			
			private function mediaHandler(evt:MediaEvent):void 
			{
				switch (evt.type) {
					case MediaEvent.JWPLAYER_MEDIA_TIME:
						//_player.removeEventListener(MediaEvent.JWPLAYER_MEDIA_TIME, mediaHandler);
						_duration = evt.duration;
						fgc.width = bgc.width * (evt.position / evt.duration);
						position.text = evt.position.toString();
						duration.text = evt.duration.toString();
						trace( "duration all :" + _duration );
						break;
				}
			}
			
			protected function doThg_clickHandler(event:MouseEvent):void
			{
				// TODO Auto-generated method stub
				var num:Number = _player.getCurrentAudioTrack();
				_player.seek(10);
				_player.controls.controlbar.hide();
				trace (num);
			}
			
		]]>
	</fx:Script>
	<fx:Declarations>
		<!-- 将非可视元素（例如服务、值对象）放在此处 -->
	</fx:Declarations>
	<s:Group width="100%" height="100%">
		<s:layout>
			<s:HorizontalLayout />
		</s:layout>
		<s:Label id="position" text="position" height="100%" width="{position.height}" left="0"/>
		<!-- <s:HSlider id="timeSlider" width="100%" height="100%" /> -->
		<s:Group width="100%" height="100%" >
			<s:Button id="bgc" chromeColor="#0A0909" enabled="false" width="100%" height="100%" />
			<s:Button id="fgc" chromeColor="#FB7D01" enabled="false" width="0%" height="100%" />
		</s:Group>
		<s:Label id="duration" text="duration" height="100%" width="{duration.height}" right="0"/>
		<!-- <s:Button id="doThg" height="100%" width="400" right="0" click="doThg_clickHandler(event)"/> -->
	</s:Group>
</s:Group>
